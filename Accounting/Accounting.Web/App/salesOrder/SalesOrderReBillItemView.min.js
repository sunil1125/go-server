define(["require","exports","plugins/router","durandal/app","salesOrder/SalesOrderRebillItemsModel"],function(n,t,i,r,u){var s=i,e=r,f=u,o=function(){function n(){this.salesOrderOriginalItemsList=ko.observableArray([]),this.salesOrderAdjustedItemsList=ko.observableArray([]),this.classTypes=ko.observableArray([]),this.packageTypes=ko.observableArray([]),this.shipmentItemTypes=ko.observableArray([]),this.orginalItemList=ko.observableArray([]),this.isSelect=ko.observable(!1),this.isRev=ko.observable(!1),this.isHaz=ko.observable(!1),this.selectedorginalItemList=ko.observableArray([]),this.gridHeader=ko.observable(""),this.name=ko.observable("Select All"),this.selected=ko.observable(!1),this.html=ko.observable(""),this.salesOrderItemAmount=ko.observable(),this.salesOrderRevenue=ko.observable(),this.salesOrderItemWeight=ko.observable(),this.salesOrderItemPieces=ko.observable(),this.salesOrderBsCost=ko.observable(),this.isBSCost=ko.observable(!1);var n=this;n.beforeBind()}return n.prototype.beforeBind=function(){var n=this,i=n.classTypes().length,t;i||e.trigger("GetClassTypesAndPackageTypes",function(t){t&&(n.classTypes.removeAll(),n.classTypes.push.apply(n.classTypes,t.FakTypeEnums),n.packageTypes.removeAll(),n.packageTypes.push.apply(n.packageTypes,t.PackageTypeEnums))}),t=n.shipmentItemTypes().length,t||e.trigger("GetItemsTypes",function(t){n.shipmentItemTypes.removeAll(),n.shipmentItemTypes.push.apply(n.shipmentItemTypes,t)})},n.prototype.addDefaultItems=function(){var n=this;n.salesOrderOriginalItemsList!==null&&n.salesOrderOriginalItemsList.removeAll();var t=$.grep(n.shipmentItemTypes(),function(n){return n.ItemId==="10"})[0],i=$.grep(n.shipmentItemTypes(),function(n){return n.ItemId==="70"})[0],r=$.grep(n.shipmentItemTypes(),function(n){return n.ItemId==="30"})[0];n.salesOrderOriginalItemsList.push(new f.Models.SalesOrderReBillItemsModel(t,function(){n.updateCheck()})),n.salesOrderOriginalItemsList.push(new f.Models.SalesOrderReBillItemsModel(i,function(){n.updateCheck()})),n.salesOrderOriginalItemsList.push(new f.Models.SalesOrderReBillItemsModel(r,function(){n.updateCheck()}))},n.prototype.initializeSalesOrderRebillItemDetails=function(n){var t=this,u=0,e=0,o=0,s=0,h=0,i,c,r;if(t.orginalItemList(n),t.salesOrderOriginalItemsList!=null&&t.salesOrderOriginalItemsList.removeAll(),n!=null)for(i=0;i<n.length;i++)c=$.grep(t.shipmentItemTypes(),function(t){return t.ItemId===n[i].ItemId.toString()})[0],r=new f.Models.SalesOrderReBillItemsModel(c,function(){t.updateCheck()}),n[i].isChecked=t.selected()?!0:!1,r.initializeSalesOrderItem(n[i],n.length),u+=n[i].Cost,e+=n[i].Weight,o+=n[i].PieceCount,s+=n[i].Revenue,h+=n[i].PLCCost,t.salesOrderOriginalItemsList.push(r);t.salesOrderRevenue($.number(s.toString(),2)),t.salesOrderItemAmount($.number(u.toString(),2)),t.salesOrderItemPieces(o),t.salesOrderItemWeight(e),t.salesOrderBsCost(h)},n.prototype.selectOption=function(){var n=this;n.selected()?n.selected(!1):(n.selected(!0),n.html('<i class="icon-ok icon-white active"><\/i>'+n.name())),n.initializeSalesOrderRebillItemDetails(n.orginalItemList())},n.prototype.updateCheck=function(){var n=this,t=$.grep(n.salesOrderOriginalItemsList(),function(n){return n.isCheck()});t.length==n.salesOrderOriginalItemsList().length?(n.selected(!0),n.html('<i class="icon-ok icon-white active"><\/i>'+n.name())):n.selected(!1)},n}();t.SalesOrderReBillItemViewModel=o})