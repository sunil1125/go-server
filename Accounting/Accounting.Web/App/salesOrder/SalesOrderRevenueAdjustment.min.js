define(["require","exports","plugins/router","durandal/app","salesOrder/SalesOrderItemsModel"],function(n,t,i,r,u){var o=i,f=r,e=u;return function(){function n(){this.revenueAdjusted=ko.observableArray([]),this.shipmentItemTypes=ko.observableArray([]),this.updateditemList=ko.observableArray([]),this.selectedClassType=ko.observable(),this.itemName=ko.observable(),this.cost=ko.observable(),this.totalRev=ko.observable(0),this.totalOrgRev=ko.observable(0),this.total=0,this.revenue=ko.observable(),this.originalRevenue=ko.observable(),this.isSave=ko.observable(!1),this.originalRevenueModelList=ko.observableArray([]);var n=this;n.NumericInputWithDecimalPoint={allowdecimal:ko.observable(!0),maxlength:11,autodigit:ko.observable(!1)},n.isTabPress=function(n,t){var i=t.which?t.which:t.keyCode;return i===9,!0}}return n.prototype.closePopup=function(n){var t=this;return t.isSave(!1),n.__dialog__.close(this,n),!0},n.prototype.continuePopup=function(n){var t=this;return t.isSave(!0),n.__dialog__.close(this,n),!0},n.prototype.load=function(){},n.prototype.compositionComplete=function(){},n.prototype.activate=function(n){var t=this,o=t.shipmentItemTypes().length;o||f.trigger("GetItemsTypes",function(n){t.shipmentItemTypes.removeAll(),t.shipmentItemTypes.push.apply(t.shipmentItemTypes,n)});var i=n.bindingObject,r=0,u=0;return i!=null&&i.forEach(function(n){var f=$.grep(t.shipmentItemTypes(),function(t){return t.ItemId===n.ItemId})[0],i=new e.Models.SalesOrderItemsModel(n.SelectedItemTypes,function(){t.updateTotalCostAndWeight()},function(){},function(){});r+=parseFloat(n.Revenue.toString().replace(/,/g,"")),u+=parseFloat(n.Revenue.toString().replace(/,/g,"")),i.initializeVendorBillItem(n),t.originalRevenueModelList.push(i)}),t.totalRev($.number(r,2)),t.totalOrgRev($.number(u,2)),!0},n.prototype.updateTotalCostAndWeight=function(){var n=this;n.total=0,n.originalRevenueModelList().forEach(function(t){n.total=n.total+parseFloat(t.rev().toString().replace(/,/g,""))}),n.totalOrgRev($.number(n.total,2))},n.prototype.attached=function(){f.trigger("viewAttached")},n}()})