(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){function w(n){var i;if(n.minTime&&(n.minTime=t(n.minTime)),n.maxTime&&(n.maxTime=t(n.maxTime)),n.durationTime&&typeof n.durationTime!="function"&&(n.durationTime=t(n.durationTime)),n.disableTimeRanges.length>0){for(i in n.disableTimeRanges)n.disableTimeRanges[i]=[t(n.disableTimeRanges[i][0]),t(n.disableTimeRanges[i][1])];for(n.disableTimeRanges=n.disableTimeRanges.sort(function(n,t){return n[0]-t[0]}),i=n.disableTimeRanges.length-1;i>0;i--)n.disableTimeRanges[i][0]<=n.disableTimeRanges[i-1][1]&&(n.disableTimeRanges[i-1]=[Math.min(n.disableTimeRanges[i][0],n.disableTimeRanges[i-1][0]),Math.max(n.disableTimeRanges[i][1],n.disableTimeRanges[i-1][1])],n.disableTimeRanges.splice(i,1))}return n}function c(r){var o=r.data("timepicker-settings"),s=r.data("timepicker-list"),v,nt,it,ut,d,p,w,ft,c,et,ot,k;if(s&&s.length&&(s.remove(),r.data("timepicker-list",!1)),o.useSelect?(s=n("<select />",{"class":"ui-timepicker-select"}),v=s):(s=n("<ul />",{"class":"ui-timepicker-list"}),v=n("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1}),v.css({display:"none",position:"absolute"}).append(s)),o.noneOption)if(o.noneOption===!0&&(o.noneOption=o.useSelect?"Time...":"None"),n.isArray(o.noneOption))for(p in o.noneOption)parseInt(p,10)===p&&(nt=b(o.noneOption[p],o.useSelect),s.append(nt));else nt=b(o.noneOption,o.useSelect),s.append(nt);o.className&&v.addClass(o.className),(o.minTime!==null||o.durationTime!==null)&&o.showDuration&&(v.addClass("ui-timepicker-with-duration"),v.addClass("ui-timepicker-step-"+o.step)),it=o.minTime,typeof o.durationTime=="function"?it=t(o.durationTime()):o.durationTime!==null&&(it=o.durationTime),ut=o.minTime!==null?o.minTime:0,d=o.maxTime!==null?o.maxTime:ut+e-1,d<ut&&(d+=e),d===e-1&&o.timeFormat.indexOf("H")!==-1&&(d=e);var tt=o.disableTimeRanges,g=0,st=tt.length;for(p=ut;p<=d;p+=o.step*60)w=p,ft=f(w,o.timeFormat),o.useSelect?(c=n("<option />",{value:ft}),c.text(ft)):(c=n("<li />"),c.data("time",w<=86400?w:w%86400),c.text(ft)),(o.minTime!==null||o.durationTime!==null)&&o.showDuration&&(et=rt(p-it,o.step),o.useSelect?c.text(c.text()+" ("+et+")"):(ot=n("<span />",{"class":"ui-timepicker-duration"}),ot.text(" ("+et+")"),c.append(ot))),g<st&&(w>=tt[g][1]&&(g+=1),tt[g]&&w>=tt[g][0]&&w<tt[g][1]&&(o.useSelect?c.prop("disabled",!0):c.addClass("ui-timepicker-disabled"))),s.append(c);if(v.data("timepicker-input",r),r.data("timepicker-list",v),o.useSelect){s.val(l(r.val(),o));s.on("focus",function(){n(this).data("timepicker-input").trigger("showTimepicker")});s.on("blur",function(){n(this).data("timepicker-input").trigger("hideTimepicker")});s.on("change",function(){u(r,n(this).val(),"select")});r.hide().after(s)}else{k=o.appendTo,typeof k=="string"?k=n(k):typeof k=="function"&&(k=k(r)),k.append(v),h(r,s);s.on("click","li",function(){r.off("focus.jQtimepicker");r.on("focus.jQtimepicker-ie-hack",function(){r.off("focus.jQtimepicker-ie-hack");r.on("focus.jQtimepicker",i.show)});a(r)||r[0].focus(),s.find("li").removeClass("ui-timepicker-selected"),n(this).addClass("ui-timepicker-selected"),y(r)&&(r.trigger("hideTimepicker"),v.hide())})}}function b(t,i){var r,u,f;return typeof t=="object"?(r=t.label,u=t.className,f=t.value):typeof t=="string"?r=t:n.error("Invalid noneOption value"),i?n("<option />",{value:f,"class":u,text:r}):n("<li />",{"class":u,text:r}).data("time",f)}function l(i,r){if(n.isNumeric(i)||(i=t(i)),i===null)return null;var u=r.step*60;return f(Math.round(i/u)*u,r.timeFormat)}function nt(){return new Date(1970,1,1,0,0,0)}function k(t){var r=n(t.target),u=r.closest(".ui-timepicker-input");u.length===0&&(r.hasClass("icon-ui-timeicon")||r.hasClass("ui-timeicon"))&&(r.hasClass("icon-ui-timeicon")?u=r.parent().prev().closest(".ui-timepicker-input"):r.hasClass("ui-timeicon")&&(u=r.prev().closest(".ui-timepicker-input"))),u.length===0&&r.closest(".ui-timepicker-wrapper").length===0&&(i.hide(),n(document).unbind(".ui-timepicker"))}function a(n){var t=n.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function s(t,i,r){if(!r&&r!==0)return!1;var e=t.data("timepicker-settings"),u=!1,f=e.step*30;return i.find("li").each(function(t,i){var e=n(i),o;if(typeof e.data("time")=="number")return o=e.data("time")-r,Math.abs(o)<f||o==f?(u=e,!1):void 0}),u}function h(n,i){var u,r,f;(i.find("li").removeClass("ui-timepicker-selected"),u=t(o(n)),u!==null)&&(r=s(n,i,u),r&&(f=r.offset().top-i.offset().top,(f+r.outerHeight()>i.outerHeight()||f<0)&&i.scrollTop(i.scrollTop()+r.position().top-r.outerHeight()),r.addClass("ui-timepicker-selected")))}function v(i){var o,l,e,r,s,h,c;if(this.value===""){u(n(this),n(this).val(),"select");return}if(o=n(this),l=o.data("timepicker-list"),!o.is(":focus")||i&&i.type=="change"){if(e=t(this.value),e===null){o.trigger("timeFormatError");return}r=o.data("timepicker-settings"),s=!1,r.minTime!==null&&e<r.minTime?s=!0:r.maxTime!==null&&e>r.maxTime&&(s=!0),n.each(r.disableTimeRanges,function(){if(e>=this[0]&&e<this[1])return s=!0,!1}),r.forceRoundTime&&(h=e%(r.step*60),h>=r.step*30?e+=r.step*60-h:e-=h),c=f(e,r.timeFormat),s?u(o,c,"error")&&o.trigger("timeRangeError"):u(o,c)}}function o(n){return n.is("input")?n.val():n.data("ui-timepicker-value")}function u(n,t,i){if(n.is("input")){n.val(t);var r=n.data("timepicker-settings");r.useSelect&&n.data("timepicker-list").val(l(t,r))}return n.data("ui-timepicker-value")!=t?(i=="select"?(n.data("ui-timepicker-value",t),n.trigger("selectTime").trigger({type:"changeTime",time:t}).trigger("change")):i!="error"&&(n.data("ui-timepicker-value",t),n.trigger({type:"changeTime",time:t})),!0):(n.trigger("selectTime"),!1)}function tt(t){var f=n(this),u=f.data("timepicker-list"),r;if(!u||!u.is(":visible"))if(t.keyCode==40)a(f)||f.focus();else return!0;switch(t.keyCode){case 13:return y(f)&&i.hide.apply(this),t.preventDefault(),!1;case 38:return r=u.find(".ui-timepicker-selected"),r.length?r.is(":first-child")||(r.removeClass("ui-timepicker-selected"),r.prev().addClass("ui-timepicker-selected"),r.prev().position().top<r.outerHeight()&&u.scrollTop(u.scrollTop()-r.outerHeight())):(u.find("li").each(function(t,i){if(n(i).position().top>0)return r=n(i),!1}),r.addClass("ui-timepicker-selected")),!1;case 40:return r=u.find(".ui-timepicker-selected"),r.length===0?(u.find("li").each(function(t,i){if(n(i).position().top>0)return r=n(i),!1}),r.addClass("ui-timepicker-selected")):r.is(":last-child")||(r.removeClass("ui-timepicker-selected"),r.next().addClass("ui-timepicker-selected"),r.next().position().top+2*r.outerHeight()>u.outerHeight()&&u.scrollTop(u.scrollTop()+r.outerHeight())),!1;case 27:u.find("li").removeClass("ui-timepicker-selected"),i.hide();break;case 9:i.hide();break;default:return!0}}function it(t){var r=n(this),i=r.data("timepicker-list");if(!i||!i.is(":visible"))return!0;if(!r.data("timepicker-settings").typeaheadHighlight)return i.find("li").removeClass("ui-timepicker-selected"),!0;switch(t.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:h(r,i);break;default:return}}function y(n){var e=n.data("timepicker-settings"),o=n.data("timepicker-list"),t=null,i=o.find(".ui-timepicker-selected"),r;return i.hasClass("ui-timepicker-disabled")?!1:(i.length&&(t=i.data("time")),t!==null&&(typeof t=="string"?n.val(t):(r=f(t,e.timeFormat),u(n,r,"select"))),!0)}function rt(n,t){var u=Math.round(n/60),i=[],f,e;return u<60?i=[u,r.mins]:(f=Math.floor(u/60),e=u%60,t==30&&e==30&&(f+=r.decimal+5),i.push(f),i.push(f==1?r.hr:r.hrs),t!=30&&e&&(i.push(e),i.push(r.mins))),i.join(" ")}function f(n,t){var f,u,i,h,o,s;if(n!==null&&(f=new Date(g.valueOf()+n*1e3),!isNaN(f.getTime()))){for(u="",o=0;o<t.length;o++){h=t.charAt(o);switch(h){case"a":u+=f.getHours()>11?r.pm:r.am;break;case"A":u+=f.getHours()>11?r.PM:r.AM;break;case"g":i=f.getHours()%12,u+=i===0?"12":i;break;case"G":u+=f.getHours();break;case"h":i=f.getHours()%12,i!==0&&i<10&&(i="0"+i),u+=i===0?"12":i;break;case"H":i=f.getHours(),n===e&&(i=24),u+=i>9?i:"0"+i;break;case"i":s=f.getMinutes(),u+=s>9?s:"0"+s;break;case"s":n=f.getSeconds(),u+=n>9?n:"0"+n;break;default:u+=h}}return u}}function t(n){var e,t,i,r,u,f;return n===""?null:!n||n+0==n?n:(typeof n=="object"&&(n=n.getHours()+":"+d(n.getMinutes())+":"+d(n.getSeconds())),n=n.toLowerCase(),e=new Date(0),n.indexOf(":")===-1?(t=n.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/),t||(t=n.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/))):t=n.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/),!t)?null:(i=parseInt(t[1]*1,10),r=t[4]?i==12?t[4]=="p"?12:0:i+(t[4]=="p"?12:0):i,u=t[2]*1||0,f=t[3]*1||0,r*3600+u*60+f)}function d(n){return("0"+n).slice(-2)}var g=nt(),e=86400,p={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"h:i A",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1},r={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},i={init:function(t){return this.each(function(){var u=n(this),s=[],e,f,o;for(e in p)u.data(e)&&(s[e]=u.data(e));if(f=n.extend({},p,s,t),f.lang&&(r=n.extend(r,f.lang)),f=w(f),u.data("timepicker-settings",f),u.data("timepicker-options",n.extend({},t)),u.addClass("ui-timepicker-input"),f.useSelect)c(u);else{u.prop("autocomplete","off");u.on("click.jQtimepicker focus.jQtimepicker",i.show);if(u.next()&&(o=u.next(),o.hasClass("ui-timeicon")))o.on("click.jQtimepicker",i.show);u.on("change.jQtimepicker",v);u.on("keydown.jQtimepicker",tt);u.on("keyup.jQtimepicker",it);v.call(u.get(0))}})},show:function(r){var u,h,f,v,l,e,y;if(r&&r.preventDefault(),u=n(this),u.hasClass("ui-timeicon")&&(u=n(u.prev())),h=u.data("timepicker-settings"),h.useSelect){u.data("timepicker-list").focus();return}if((a(u)&&u.blur(),f=u.data("timepicker-list"),v=!0,!u.prop("readonly"))&&(f&&f.length!==0&&typeof h.durationTime!="function"||(c(u),f=u.data("timepicker-list"),v=!1),!f.is(":visible"))){i.hide(),f.show(),l={},l.left=h.orientation=="rtl"?u.offset().left+u.outerWidth()-f.outerWidth()+parseInt(f.css("marginLeft").replace("px",""),10):u.offset().left+parseInt(f.css("marginLeft").replace("px",""),10)+(v?0:10),l.top=u.offset().top+u.outerHeight(!0)+f.outerHeight()>n(window).height()+n(window).scrollTop()?u.offset().top-f.outerHeight()+parseInt(f.css("marginTop").replace("px",""),10):u.offset().top+u.outerHeight()+parseInt(f.css("marginTop").replace("px",""),10),f.offset(l);n(window).on("resize",n.proxy(i.move,this));e=f.find(".ui-timepicker-selected"),e.length||(o(u)?e=s(u,f,t(o(u))):h.scrollDefaultNow?e=s(u,f,t(new Date)):h.scrollDefaultTime!==!1&&(e=s(u,f,t(h.scrollDefaultTime)))),e&&e.length?(y=f.scrollTop()+e.position().top-e.outerHeight(),f.scrollTop(y)):f.scrollTop(0);n(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",k);if(h.closeOnWindowScroll)n(document).on("scroll.ui-timepicker",k);return u.trigger("showTimepicker"),this}},hide:function(){var t=n(this),r=t.data("timepicker-settings");return r&&r.useSelect&&t.blur(),n(window).off("resize",n.proxy(i.move,this)),n(".ui-timepicker-wrapper:visible").each(function(){var i=n(this),t=i.data("timepicker-input"),r=t.data("timepicker-settings");r&&r.selectOnBlur&&y(t),i.hide(),t.trigger("hideTimepicker")}),this},option:function(t,i){var u=this,r=u.data("timepicker-settings"),f=u.data("timepicker-list");if(typeof t=="object")r=n.extend(r,t),u.data("timepicker-options",n.extend({},t));else if(typeof t=="string"&&typeof i!="undefined")r[t]=i,u.data("timepicker-options",n.extend({},{key:i}));else if(typeof t=="string")return r[t];return r=w(r),u.data("timepicker-settings",r),f&&(f.remove(),u.data("timepicker-list",!1)),r.useSelect&&c(u),this},getSecondsFromMidnight:function(){return t(o(this))},getTime:function(n){var f=this,u=o(f),r,i;return u?(n||(n=new Date),r=t(u),i=new Date(n),i.setHours(r/3600),i.setMinutes(r%3600/60),i.setSeconds(r%60),i.setMilliseconds(0),i):null},setTime:function(n){var i=this,r=f(t(n),i.data("timepicker-settings").timeFormat);return u(i,r),i.data("timepicker-list")&&h(i,i.data("timepicker-list")),this},formatAndSetTime:function(n){var i=this,u=f(t(n),i.data("timepicker-settings").timeFormat),r;return i.is("input")&&(i.val(u),r=i.data("timepicker-settings"),r.useSelect&&i.data("timepicker-list").val(l(u,r))),v.call(i.get(0)),i.data("timepicker-list")&&h(i,i.data("timepicker-list")),this},remove:function(){var n=this,t;if(n.hasClass("ui-timepicker-input"))return t=n.data("timepicker-settings"),n.removeAttr("autocomplete","off"),n.removeClass("ui-timepicker-input"),n.removeData("timepicker-settings"),n.off(".timepicker"),n.data("timepicker-list")&&n.data("timepicker-list").remove(),t.useSelect&&n.show(),n.removeData("timepicker-list"),this},move:function(){var t=n(this),u=t.data("timepicker-settings"),r={},i=t.data("timepicker-list");return r.left=u.orientation=="rtl"?t.offset().left+t.outerWidth()-i.outerWidth()+parseInt(i.css("marginLeft").replace("px",""),10):t.offset().left+parseInt(i.css("marginLeft").replace("px",""),10),r.top=t.offset().top+t.outerHeight(!0)+i.outerHeight()>n(window).height()+n(window).scrollTop()?t.offset().top-i.outerHeight()+parseInt(i.css("marginTop").replace("px",""),10):t.offset().top+t.outerHeight()+parseInt(i.css("marginTop").replace("px",""),10),i.offset(r),this}};n.fn.jQTimepicker=function(t){if(!this.length)return this;if(i[t])return this.hasClass("ui-timepicker-input")?i[t].apply(this,Array.prototype.slice.call(arguments,1)):this;if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery.timepicker");else return i.init.apply(this,arguments)}});