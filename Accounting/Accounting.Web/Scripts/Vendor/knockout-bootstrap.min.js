function s4(){"use strict";return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function guid(){"use strict";return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}function setupKoBootstrap(n){"use strict";n.bindingHandlers.typeahead={init:function(t,i,r){var e=$(t),u=r(),f={source:n.utils.unwrapObservable(i()),minLength:u.minLength,items:u.items,updater:u.updater,serverSideFilter:u.serverSideFilter,msgNoRecordFound:u.msgNoRecordFound,showEmptyMessage:u.showEmptyMessage,autoSelectFirstIem:u.autoSelectFirstIem,throttle:u.throttle||!1,throttleTimeout:u.throttleTimeout||300},o=function(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null,i||n.apply(u,f)},o=i&&!r;clearTimeout(r),r=setTimeout(e,t),o&&n.apply(u,f)}};f.throttle&&(f.source=o(n.utils.unwrapObservable(i()),f.throttleTimeout)),u.typeaheadOptions&&$.each(u.typeaheadOptions,function(t,i){f[t]=n.utils.unwrapObservable(i)}),e.attr("autocomplete","off").typeahead(f)}},n.bindingHandlers.progress={init:function(t,i,r,u){var f=$(t),e=$("<div/>",{"class":"bar","data-bind":"style: { width:"+i()+" }"});f.attr("id",guid()).addClass("progress progress-info").append(e),n.applyBindingsToDescendants(u,f[0])}},n.bindingHandlers.alert={init:function(t,i){var u=$(t),r=n.utils.unwrapObservable(i()),f=$("<button/>",{type:"button","class":"close","data-dismiss":"alert"}).html("&times;"),e=$("<p/>").html(r.message);u.addClass("alert alert-"+r.priority).append(f).append(e)}},n.bindingHandlers.tooltip={update:function(t,i){var r,u,e,f,o;if(u=n.utils.unwrapObservable(i())||{},r=$(t),n.isObservable(u.title)){f=!1;r.on("show.tooltip",function(){f=!0});r.on("hide.tooltip",function(){f=!1});o=u.animation||!0,u.title.subscribe(function(){f&&(r.data("tooltip").options.animation=!1,r.tooltip("fixTitle").tooltip("hide").tooltip("show"),r.data("tooltip").options.animation=o)})}e=r.data("tooltip"),e?$.extend(e.options,u):r.tooltip(u)}},n.bindingHandlers.popover={init:function(t,i,r,u,f){var a,p,o;if(n.utils.unwrapObservable(i())!=null){var e=n.utils.unwrapObservable(i()),w=e.title,s=e.template;s&&$(t).data("tmplId",s);var y=e.data,b=e.allowToggle||!1,h="click",l="click";e.trigger&&(h=e.trigger),h==="hover"?l="mouseenter mouseleave":h==="focus"&&(l="focus blur"),a=e.placement,p=y?function(){var t=$('<div data-bind="template: { name: template, if: data, data: data }"><\/div>');return n.applyBindings({template:s,data:y},t[0]),t}:$("#"+s).html();var k=guid(),c="ko-bs-popover-"+k,d=f.createChildContext(u),g=$("<div/>",{"class":"ko-popover",id:c}).html(p),v={content:$(g[0]).outerHtml(),title:w};a&&(v.placement=a),e.container&&(v.container=e.container),o=$.extend({},n.bindingHandlers.popover.options,v),$(t).bind(l,function(i){var g="show",l=$(this),f=!1,nt,r,a;$(t).data("tmplId")!==s&&(s=$(t).data("tmplId"),nt=$(o.content).empty().html($("#"+s).html()),o.content=$(nt[0]).outerHtml(),f=!0);var tt=function(n){if(n.target!==i.target)this.hide();else return n.preventDefault()},rt=function(n,t){$(document).on("mousedown",$.proxy(tt,t.popover));$(this).unbind("shown")},ut=function(){return $(document).off("mousedown",tt),$(this).unbind("hidden"),!0};if((h!=="click"||b)&&(g="toggle"),l.on("shown",rt).on("hidden",ut).popover(o).popover(g),f&&l.popover("updateContent",o.content),r=$("#"+c),$(".ko-popover").not(r).parents(".popover").remove(),a=$(r).parents().closest(".in"),f&&r&&r.outerHtml()!==$(o.content).outerHtml()&&($("#"+c).html($(o.content).children()),r=$("#"+c),f=!1),r.is(":visible")&&a.length&&$(a).hasClass("popover")){n.applyBindingsToDescendants(d,r[0]);var e=$(t).offset().top,v=$(t).offset().left,y=$(t).outerHeight(),it=$(t).outerWidth(),u=$(r).parents(".popover"),p=u.outerHeight(),w=u.outerWidth(),k=10;switch(o.placement){case"left":u.offset({top:e-p/2+y/2,left:v-k-w});break;case"right":u.offset({top:e-p/2+y/2});break;case"top":u.offset({top:e-p-k,left:v-w/2+it/2});break;case"bottom":u.offset({top:e+y+k,left:v-w/2+it/2})}}$(document).on("click",'[data-dismiss="popover"]',function(){l.popover("hide")});return{controlsDescendantBindings:!0}})}},update:function(t,i){var u=n.utils.unwrapObservable(i()),r;u&&(r=u.template),r&&$(t).data("tmplId")!==r&&$(t).data("tmplId",r)},options:{placement:"right",title:"",html:!0,content:"",trigger:"manual"}},n.bindingHandlers.categorizetypeahead={init:function(t,i,r){var o=$(t),u=r(),f=u.categorizeTypeaheadOptions||{},e={source:n.utils.unwrapObservable(i()),minLength:u.minLength||f.minLength,items:u.items||f.items,updater:u.updater||f.updater,serverSideFilter:u.serverSideFilter||f.serverSideFilter,msgNoRecordFound:u.msgNoRecordFound||f.msgNoRecordFound,showEmptyMessage:u.showEmptyMessage||f.showEmptyMessage,autoSelectFirstIem:u.autoSelectFirstIem||f.autoSelectFirstIem,throttle:u.throttle||f.throttle||!1,throttleTimeout:u.throttleTimeout||f.throttleTimeout||300,groupbyKey:u.groupbyKey||f.groupbyKey,isCategorizedResult:u.isCategorizedResult||f.isCategorizedResult,filteredDisplayKey:u.filteredDisplayKey||f.filteredDisplayKey,templates:u.templates||f.templates},s;e=$.extend({},n.bindingHandlers.categorizetypeahead.options,e),(f.displaykey||u.displaykey)&&o.data("filterkey",f.displaykey||u.displaykey),(f.datakeys||u.datakeys)&&o.data("datakeys",f.datakeys||u.datakeys),(f.iconsettings||u.iconsettings)&&o.data("iconsettings",f.iconsettings||u.iconsettings),s=function(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null,i||n.apply(u,f)},o=i&&!r;clearTimeout(r),r=setTimeout(e,t),o&&n.apply(u,f)}},e.throttle&&(e.source=s(n.utils.unwrapObservable(i()),e.throttleTimeout)),u.typeaheadOptions&&$.each(u.typeaheadOptions,function(t,i){e[t]=n.utils.unwrapObservable(i)}),o.attr("autocomplete","off").typeahead(e)},options:{menu:'<ul class="categorizetypeahead dropdown-menu"><\/ul>',item:'<li class="categorizetypeaheadItems"><span><\/span><\/li>',headeritem:'<li class="categorizetypeaheadHeading" data-value="category"><\/li>',allowEnter:!0,allowTab:!1,allowSorter:!1,allowMouseDown:!0,isCategoryTypeahead:!0,highlighter:function(n){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return typeof n=="string"&&String.prototype.hasOwnProperty("capitalize")&&(n=n.capitalize(!0)),n.replace(new RegExp("("+t+")","ig"),function(n,t){return $("<span><\/span>").addClass("highlight").html(t).outerHtml()})},groupbyKey:"category",render:function(n){function o(n){var i=l(t.templates,n[t.groupbyKey]),u;i&&n.items&&n.items.length&&(u=$(t.headeritem).append(i.header).attr("data-category",i.name),n.items.length>i.slicecount&&(r=!0,u.append(i.moreresult)),t.$menu.append(u.outerHtml())),t.$menu.append(s(n.items.slice(0,i?i.slicecount:n.items.length),i?i.name:undefined))}function s(n,r){return $(n).map(function(index,item){var spanText,iconClass,key;!item[t.groupbyKey]&&r&&(item[t.groupbyKey]=r);var liItem=$(t.options.item).attr("data-value",JSON.stringify(item)),dataItem=item,iconSettings=t.$element.data("iconsettings"),filteredItem;if($.isPlainObject(iconSettings)||eval("iconSettings="+iconSettings),t.isResultItemIsString||(filteredItem=v(item),item=a(item)),typeof iconSettings=="object"){spanText=$("<span><\/span>").html(t.highlighter(filteredItem?i(item):item)),iconClass=null;for(key in iconSettings)if(iconClass=y(iconSettings,dataItem,key),iconClass)break;iconClass&&iconClass.length&&liItem.find("span").append($("<i>&nbsp;<\/i>").addClass(iconClass)),liItem.find("span").append(spanText)}else liItem.find("span").html(t.highlighter(filteredItem?i(item):item));return filteredItem&&(liItem.find("span").addClass("alignleft").attr("title",f(item,!0)),liItem.append($("<span><\/span>").addClass("filteredDisplay").html(t.highlighter(u(filteredItem))).attr("title",f(filteredItem,!1)))),item.toString()==="..."&&liItem.find("span").attr("style","line-height: 7px; text-align: center;"),liItem[0]})}function h(n,t){var i=[],r=[];return $.each(n,function(n,r){$.inArray(r[t],i)==-1&&i.push(r[t])}),$.each(i,function(i,u){var f={};f[t]=u,f.items=[],$.inArray(u,n)==-1&&(f.items=$.map(n,function(n){if(n.hasOwnProperty(t)){if(n[t]===u)return n}else return n})),r.push(f)}),r}function c(n,t){function i(n,i){return t(i,n)}$.each(n,i)}function l(n,t){if(n&&n.length){var i=$.map(n,function(n){if(n.name===t)return{name:n.name,header:n.header||"<span>"+n.name+"<\/span>",slicecount:n.slicecount||2,moreresult:n.moreresult||'<a href="#">All '+n.name+' Results<span class="greatericon">&nbsp;&rsaquo;&rsaquo;<\/span><\/a>'}});if(i&&i.length)return i[0]}return t?{name:t,header:"<span>"+t+"<\/span>",slicecount:2,moreresult:'<a href="#">All '+t+' Results<span class="greatericon">&nbsp;&rsaquo;&rsaquo;<\/span><\/a>'}:!1}function a(n){return typeof n[t.getFilterKey()]=="function"?n[t.getFilterKey()]():n[t.getFilterKey()]}function i(n){return typeof n=="string"&&n&&n.length?n.length>13?n.substring(0,10)+"...":n:n}function v(n){return t.filteredDisplayKey&&n.hasOwnProperty(t.filteredDisplayKey)?typeof n[t.filteredDisplayKey]=="function"?n[t.filteredDisplayKey]():n[t.filteredDisplayKey]:undefined}function u(n){return typeof n=="string"&&n&&n.length?n.length>32?n.substring(0,30)+"...":n:n}function f(n,t){return t&&n===i(n)?undefined:!t&&n===u(n)?undefined:n}function y(n,t,i){if(n.hasOwnProperty(i)&&t.hasOwnProperty(i)){if(typeof t[i]=="function"){if(t[i]())return n[i]}else if(t[i])return n[i]}else if(i==="defaulticon"&&n.hasOwnProperty("defaulticon"))return n[i]}var t=this,e=t.isCategorizedResult?n:h(n,t.groupbyKey),r=!1;return t.$menu.html(""),c(e,o),r&&t.$menu.append('<li class="categorizetypeaheadMoreResult" data-value="MoreResult" data-category="MoreResult"><span><a href="#">More Results<span class="greatericon">&nbsp;&rsaquo;&rsaquo;<\/span><\/a><\/span><\/li>'),t.$menu.find("li:first").addClass("active"),t},click:function(n){var r;n.stopPropagation(),n.preventDefault();var i=this.$menu.find(".active"),t=$(n.target),u=i.find("span.filteredDisplay");if(i.data("value")==="category"||i.data("value")==="MoreResult")return(r=i.find("a"),t=r.is(t)?t:t.parent("a"),r.is(t))?(this.$element.trigger({type:"onClickMoreResult",resultData:{category:i.data("category"),query:this.query}},[{category:i.data("category"),query:this.query}]),this.hide(),this.$element.focus(),this):void 0;i.is(t)||u.is(t)||t.hasClass("highlight")&&u.is(t.parent("span.filteredDisplay"))||(this.select(),this.$element.focus())},blur:function(){var n=this;if((!n.shown||n.$menu.find(".active").attr("data-value")!=="category")&&this.$menu.find(".active").attr("data-value")!=="MoreResult"&&(!n.shown||!n.$menu.find(".categorizetypeaheadItems.active").outerHtml())&&(n.focused=!1,n.$element.hasClass("ui-autocomplete-loading")&&n.$element.removeClass("ui-autocomplete-loading"),!n.mousedover&&n.shown)){if(n.autoSelectFirstIem)return n.select();n.hide()}},keyup:function(n){switch(n.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:if(!this.shown)return;if(!this.allowTab)return;this.select();break;case 13:if(!this.shown)return;if(!this.allowEnter)return;this.selectFirst();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}},selectFirst:function(){var n={},t,i;if(this.focused||this.mousedover?n=this.isCategoryTypeahead?JSON.parse(this.$menu.find(".categorizetypeaheadItems:first").attr("data-value")):JSON.parse(this.$menu.find(".active").attr("data-value")):this.results&&this.results.length&&(n=this.results[0]),n[this.getFilterKey()]===this.msgNoRecordFound||n[this.getFilterKey()]==="...")return this.$element.hasClass("ui-autocomplete-loading")&&this.$element.removeClass("ui-autocomplete-loading"),this.shown?this.hide():this;if(this.isResultItemIsString?t=n:(t=n[this.getFilterKey()],i=JSON.stringify(this.getDataItems(n))),!this.focused&&t&&t.toLowerCase().indexOf(this.query.toLowerCase())===-1&&i&&i.toLowerCase().indexOf(this.query.toLowerCase())===-1){!this.mousedover&&this.shown&&this.hide();return}return this.$element.val(t).change(),this.$element.trigger({type:"onSelect",obj:n},[{query:this.query,selectedItem:n}]),this.hide()}}}}(function(n){"use strict";n.fn.outerHtml=function(){var t,i,r;return this.length===0?!1:(t=this[0],i=t.tagName.toLowerCase(),t.outerHTML)?t.outerHTML:(r=n.map(t.attributes,function(n){return n.name+'="'+n.value+'"'}),"<"+i+(r.length>0?" "+r.join(" "):"")+">"+t.innerHTML+"<\/"+i+">")}})(jQuery),function(n){"use strict";typeof define=="function"&&define.amd?define(["require","exports","knockout"],function(t,i,r){n(r)}):n(window.ko)}(setupKoBootstrap);