@using System.Web
@using System.Web.Optimization

@{
	Layout = null;
	@model Accounting.Web.Models.ResetPassword
}

<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width" />
	<title>Accounting - Reset Password</title>
	<link rel="shortcut icon" href="~/Content/images/appolo-favicon-circle-1.png" type="image/vnd.microsoft.icon">
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link href="~/Content/login.css" rel="stylesheet" />
	<link href="~/Content/bootstrap-responsive.css" rel="stylesheet" />
	<link href="~/Content/bootstrap.css" rel="stylesheet" />
	<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>

	@Styles.Render("~/loginContent/css")
	@Styles.Render("~/Content/css")
	@Scripts.Render("~/Scripts/vendor.js")
	@Scripts.Render("~/Scripts/Simplex.js")
	@Html.Partial("_configuration")
	<script src="~/Scripts/ResetPassword.js"></script>

	<style type="text/css">
		html
		{
			font-size: 100%;
			-webkit-text-size-adjust: 100%;
			-moz-text-size-adjust: 100%;
			text-size-adjust: 100%;
			-ms-text-size-adjust: 100%;
			background-repeat: no-repeat;
		}

		input.input-validation-error, .input-validation-error
		{
			text-align: left;
		}

		.loginLoaderContainer
		{
			min-height: 96.3%;
			height: 99%;
			position: absolute !important;
			top: -6px !important;
		}
	</style>

	<script type="text/javascript">
		if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
			var msViewportStyle = document.createElement("style");
			var mq = "@@-ms-viewport{width:auto!important}";
			msViewportStyle.appendChild(document.createTextNode(mq));
			document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
		}
	</script>
	<script>
		(function (i, s, o, g, r, a, m) {
			i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
				(i[r].q = i[r].q || []).push(arguments)
			}, i[r].l = 1 * new Date(); a = s.createElement(o),
			m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
		})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

		var ga_host = window.location.hostname;
		if (/10-4.com/.test(ga_host)) {
			//hits from 10-4 test servers
			ga('create', 'UA-46646669-1', '10-4.com');
		} else { //if (/localhost/.test(ga_host)) {
			//hits from dev machines
			ga('create', 'UA-46646669-2', 'cr2env.com', {
				'cookieDomain': 'none'
			});
		}
		ga('send', 'pageview');
	</script>
</head>

<body style="font-size: 11px; overflow: hidden;">

	<div class=" loginContainer Portalzindex" style="top: 28%">
		<div class="row-fluid">
			<div class="login_header pageHeader">

				<p id="txt_web"></p>

				<p id="txt_CareerRate">ACCOUNTING PORTAL</p>
			</div>
		</div>

		@if (Model != null && Model.IsTokenValid == true)
  {
			<div class="loginTopDiv">
				<div id="resetPasswordDiv">
					<ul>
						<li class="active" style="width: 30%; list-style-type: none; padding: 10px 0px;">
							<span class="signInLabel">Reset <b class="bold">Password</b></span>
						</li>
					</ul>
					<div style="margin-top: 100px; margin-left: -15px">
						<strong style="font-size: large; margin-left: 40px"><span class="signInLabel">Reset <b class="bold">Password</b></span></strong>
						<br />
						<br />
						<div style="margin-left: 20px">
							<div>
								<div class="input-validation-error" data-bind="visible: (newPassword.isModified() && !newPassword.isValid())" style="position: absolute; width: 291px; height: 30px;">
									<i class=" icon-question-sign tooltip-cursor" style="font-size: 11px; float: left; margin-top: 10px; margin-left: 5px;"
										data-bind="visible: (newPassword.isModified() && !newPassword.isValid()), tooltip: { title: newPassword.isModified() ? confirmPassword() !== newPassword() ? newPassword() === '' ? 'Password is required.' : 'Confirm password should be same as password.' : newPassword.error : newPassword.error, placement: 'bottom', trigger: 'hover' }"></i>
								</div>

								<input type="password" id="Password" autofocus="autofocus" name="Password" placeholder="Enter your password"
									style="position: relative; margin-left: 20px; width: 258px; margin-top: 1px"
									data-bind="value: newPassword, valueUpdate: 'afterkeydown'" />

								@*<input type="password" id="Password" name="Password"" autofocus="autofocus" placeholder="Enter your password"
								style="position: relative; margin-left: 20px; width: 255px; margin-top: 2px" data-bind="value: newPassword, valueUpdate: 'afterkeydown'" />*@
							</div>
							<div>
								<div class="input-validation-error" data-bind="visible: (confirmPassword.isModified() && !confirmPassword.isValid())" style="position: absolute; width: 291px; height: 30px;">
									<i class=" icon-question-sign tooltip-cursor" style="font-size: 11px; float: left; margin-top: 10px; margin-left: 5px;"
										data-bind="visible: (confirmPassword.isModified() && !confirmPassword.isValid()), tooltip: { title: confirmPassword.isModified() ? confirmPassword() !== newPassword() ? confirmPassword() === '' ? 'Confirm Password is required.' : 'Confirm password should be same as password.' : confirmPassword.error : confirmPassword.error, placement: 'bottom', trigger: 'hover' } "></i>
								</div>
								<input type="password" id="Confirmpassword" placeholder="Re-enter your password"
									style="position: relative; margin-left: 20px; width: 258px; margin-top: 1px"
									data-bind='value: confirmPassword, valueUpdate: "afterkeydown"' />

								<a style="text-decoration: none;" data-bind="visible: passwordHasValue">
									<i data-bind="visible: !passmatchValidation()" class="icon-remove red" style="margin-left: 5px" title="Password missmatch"></i>

									<i data-bind="visible: passmatchValidation" class="icon-ok green" style="margin-left: 5px; color: green" title="Password matched"></i>
								</a>
							</div>
						</div>

						<div class="ResetPaswordButton" style="margin-top: 20px; padding-bottom: 35px; margin-left: 40px">
							<input type="submit" style="width: 156px !important;" value="Reset Password" class="btn btn-primary" data-bind="click: resetPassword " />
						</div>
					</div>
				</div>
			</div>

			<div id="successMessageDiv" class="loginTopDiv" style="display: none; margin-top: 150px; text-align: center; position: absolute; font-size: initial">
				<p>
					The password is changed successfully.
				</p>
				<p>
					Please @Html.ActionLink("Login", "Login", new { ReturnUrl = "Login" }, new { style = "font-weight:bold;" }) with your new password.
				</p>
			</div>
  }

		<div>
			<div id="expiryMessageDiv" class="loginTopDiv" style="display: none; margin-top: 150px; text-align: center">
				<p style="font-size: medium">
					You have already reset your password using this link.
				</p>
				<p style="font-size: medium">
					Please @Html.ActionLink("Login", "Login", new { ReturnUrl = "Login" }, new { style = "font-weight:bold;" })
					with your new password.
				</p>
			</div>
		</div>

		@if (Model != null && Model.IsTokenValid == false)
  {
			<div id="resetPasswordDivErr" class="loginTopDiv">
				<div class="resetPageExpireMessageDiv">
					<p style="font-size: medium">
						You have already reset your password using this link.
					</p>
					<p style="font-size: medium">
						Please @Html.ActionLink("Login", "Login", new { ReturnUrl = "Login" }, new { style = "font-weight:bold;" })
						with your new password.
					</p>
				</div>
			</div>
  }
	</div>
	<div class="row-fluid">
		<div class="login-footer pageFooter" id="footer">
			<p class="footer_text">&copy; 2014 Accounting Portal</p>
		</div>
	</div>
</body>
</html>